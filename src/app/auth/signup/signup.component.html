<div class="onboarding">
  <header class="brand">
    <button
      class="btn btn-link link-danger p-0 me-2"
      routerLink="/auth"
      [attr.aria-label]="'common.back' | translate"
    >
      ←
    </button>
    <span class="name">Louage&nbsp;Express</span>
  </header>

  <section class="auth-card">
    <h3>{{ 'signup.title' | translate }}</h3>

    <form
      *ngIf="step === 1"
      (ngSubmit)="nextStep()"
      #infoForm="ngForm"
      class="d-flex flex-column gap-3 w-100"
    >
      <select
        class="form-select"
        name="userType"
        [(ngModel)]="userType"
        required
      >
        <option value="" disabled>{{ 'signup.selectRole' | translate }}</option>
        <option value="passenger">{{ 'signup.passenger' | translate }}</option>
        <option value="driver">{{ 'signup.driver' | translate }}</option>
      </select>
      <input
        class="form-control"
        type="text"
        name="name"
        [(ngModel)]="general.name"
        [placeholder]="'signup.fullName' | translate"
        required
      />
      <input
        class="form-control"
        type="email"
        name="email"
        [(ngModel)]="general.email"
        [placeholder]="'signup.email' | translate"
        required
      />
      <input
        class="form-control"
        type="password"
        name="password"
        [(ngModel)]="general.password"
        [placeholder]="'signup.password' | translate"
        required
      />
      <button type="submit" class="btn btn-danger w-100">{{ 'signup.next' | translate }}</button>
    </form>

    <form
      *ngIf="step === 2"
      (ngSubmit)="nextStep()"
      #phoneForm="ngForm"
      class="d-flex flex-column gap-3 w-100"
    >
      <input
        class="form-control"
        type="tel"
        name="phone"
        [(ngModel)]="phone"
        [placeholder]="'signup.phoneNumber' | translate"
        required
      />
      <input
        class="form-control"
        type="text"
        name="code"
        [(ngModel)]="verificationCode"
        [placeholder]="'signup.verificationCode' | translate"
        required
      />
      <div class="d-flex gap-3">
        <button
          type="button"
          class="btn btn-outline-danger flex-fill"
          (click)="prevStep()"
        >
          {{ 'signup.back' | translate }}
        </button>
        <button type="submit" class="btn btn-danger flex-fill">{{ 'signup.next' | translate }}</button>
      </div>
    </form>

    <form
      *ngIf="step === 3"
      (ngSubmit)="nextStep()"
      #idForm="ngForm"
      class="d-flex flex-column gap-3 w-100"
    >
      <input
        class="form-control"
        type="text"
        name="id"
        [(ngModel)]="idNumber"
        [placeholder]="'signup.idNumber' | translate"
        required
      />
      <div class="d-flex gap-3">
        <button
          type="button"
          class="btn btn-outline-danger flex-fill"
          (click)="prevStep()"
        >
          {{ 'signup.back' | translate }}
        </button>
        <button type="submit" class="btn btn-danger flex-fill">
          {{ userType === 'driver' ? ('signup.next' | translate) : ('signup.finish' | translate) }}
        </button>
      </div>
    </form>

    <form
      *ngIf="step === 4 && userType === 'driver'"
      (ngSubmit)="finish()"
      #licenseForm="ngForm"
      class="d-flex flex-column gap-3 w-100"
    >
      <input
        class="form-control"
        type="text"
        name="license"
        [(ngModel)]="licenseNumber"
        [placeholder]="'signup.driverLicense' | translate"
        required
      />
      <div class="d-flex gap-3">
        <button
          type="button"
          class="btn btn-outline-danger flex-fill"
          (click)="prevStep()"
        >
          {{ 'signup.back' | translate }}
        </button>
        <button type="submit" class="btn btn-danger flex-fill">{{ 'signup.finish' | translate }}</button>
      </div>
    </form>
  </section>
</div>
